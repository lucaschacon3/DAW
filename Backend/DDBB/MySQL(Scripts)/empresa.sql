DROP DATABASE IF EXISTS bd_empresa;
CREATE DATABASE bd_empresa;
USE bd_empresa;

CREATE TABLE t_centros
(
codigo_centro  INTEGER NOT NULL,
nombre_centro  VARCHAR(21) NOT NULL,
ubicacion  VARCHAR(22) NOT NULL
);

CREATE TABLE t_departamentos
(
codigo_departamento  INTEGER NOT NULL,
codigo_centro  INTEGER NOT NULL,
codigo_director  INTEGER NOT NULL,
tipo_director  CHAR NOT NULL,
presupuesto_departamento  DECIMAL NOT NULL,
codigo_departamento_superior  INTEGER,
nombre_departamento  VARCHAR(20) NOT NULL
);

CREATE TABLE t_empleados
(
codigo_empleado  INTEGER NOT NULL,
codigo_departamento  INTEGER NOT NULL,
extension_telefonica_empleado  SMALLINT NOT NULL,
fecha_nacimiento_empleado  DATE NOT NULL,
fecha_ingreso_empleado  DATE NOT NULL,
salario_base_empleado  DECIMAL NOT NULL,
comision_empleado  DECIMAL,
numero_hijos_empleado  SMALLINT NOT NULL,
nombre_empleado  VARCHAR(16) NOT NULL
);

ALTER TABLE t_centros ADD
PRIMARY KEY ( codigo_centro );

ALTER TABLE t_departamentos ADD
PRIMARY KEY ( codigo_departamento );

ALTER TABLE t_empleados ADD
PRIMARY KEY ( codigo_empleado );

ALTER TABLE t_departamentos ADD CONSTRAINT `pertenece_a` FOREIGN KEY (`codigo_centro`) REFERENCES `t_centros`(`codigo_centro`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE t_empleados ADD CONSTRAINT `trabaja_en` FOREIGN KEY (`codigo_departamento`) REFERENCES `t_departamentos`(`codigo_departamento`) ON DELETE CASCADE ON UPDATE CASCADE;

INSERT INTO t_centros VALUES(10, 'SEDE CENTRAL', 'C/ ALCALA, 820, MADRID');
INSERT INTO t_centros VALUES(20, 'RELACION CON CLIENTES', 'C/ ATOCHA, 405, MADRID');

INSERT INTO t_departamentos VALUES(100, 10, 260, 'P', 120000, NULL, 'DIRECCION GENERAL');
INSERT INTO t_departamentos VALUES(110, 20, 180, 'P', 15000, 100, 'DIRECCION COMERCIAL');
INSERT INTO t_departamentos VALUES(111, 20, 180, 'F', 11000, 110, 'SECTOR INDUSTRIAL');
INSERT INTO t_departamentos VALUES(112, 20, 270, 'P', 9000, 110, 'SECTOR SERVICIOS');
INSERT INTO t_departamentos VALUES(120, 10, 150, 'F', 3000, 100, 'ORGANIZACION');
INSERT INTO t_departamentos VALUES(121, 10, 150, 'P', 2000, 120, 'PERSONAL');
INSERT INTO t_departamentos VALUES(122, 10, 350, 'P', 6000, 120, 'PROCESO DE DATOS');
INSERT INTO t_departamentos VALUES(130, 10, 310, 'P', 2000, 100, 'FINANZAS');

INSERT INTO t_empleados VALUES(110, 121, 350, '1949-10-11', '1970-02-15', 3100, NULL, 3, 'PONS, CESAR');
INSERT INTO t_empleados VALUES(120, 112, 840, '1955-06-09', '1988-10-01', 3500, 1100,  1, 'LASA, MARIO');
INSERT INTO t_empleados VALUES(130, 112, 810, '1965-09-09', '1989-02-01', 2900, 1100, 2, 'TEROL, LUCIANO');
INSERT INTO t_empleados VALUES(150, 121, 340, '1950-08-10', '1968-01-15', 4400, NULL, 0, 'PEREZ, JULIO');
INSERT INTO t_empleados VALUES(160, 111, 740, '1959-07-09', '1988-11-11', 3100, 1100, 2, 'AGUIRRE, AUREO');
INSERT INTO t_empleados VALUES(180, 110, 508, '1954-10-18', '1976-03-18', 4800, 500, 2, 'PEREZ, MARCOS');
INSERT INTO t_empleados VALUES(190, 121, 350, '1952-05-12', '1982-02-11', 3000, NULL, 4, 'VEIGA, JULIANA');
INSERT INTO t_empleados VALUES(210, 100, 200, '1960-09-28', '1979-01-22', 3800, NULL, 2, 'GALVEZ, PILAR');
INSERT INTO t_empleados VALUES(240, 111, 760, '1962-02-26', '1986-02-04', 2800, 1000, 3, 'SANZ, LAVINIA');
INSERT INTO t_empleados VALUES(250, 100, 250, '1966-10-27', '1987-03-01', 4500, NULL, 0, 'ALBA, ADRIANA');
INSERT INTO t_empleados VALUES(260, 100, 220, '1963-12-03', '1988-07-12', 7200, NULL, 9, 'LOPEZ, ANTONIO');
INSERT INTO t_empleados VALUES(270, 112, 800, '1965-05-21', '1986-09-10', 3800, 800, 3, 'GARCIA, OCTAVIO');
INSERT INTO t_empleados VALUES(280, 130, 410, '1968-01-11', '1991-10-08', 2900, NULL, 5, 'FLOR, DOROTEA');
INSERT INTO t_empleados VALUES(285, 122, 620, '1969-10-25', '1988-02-15', 3800, NULL, 0, 'POLO, OTILIA');
INSERT INTO t_empleados VALUES(290, 120, 910, '1967-11-30', '1988-02-14', 2700, NULL, 3, 'GIL, GLORIA');
INSERT INTO t_empleados VALUES(310, 130, 480, '1966-11-21', '1991-01-15', 4200, NULL, 0, 'GARCIA, AUGUSTO');
INSERT INTO t_empleados VALUES(320, 122, 620, '1977-12-25', '1998-02-05', 4050, NULL, 2, 'SANZ, CORNELIO');
INSERT INTO t_empleados VALUES(330, 112, 850, '1968-08-19', '1992-03-01', 2800, 900, 0, 'DIEZ, AMELIA');
INSERT INTO t_empleados VALUES(350, 122, 610, '1959-04-13', '1994-09-10', 4500, NULL, 1, 'CAMPS, AURELIO');
INSERT INTO t_empleados VALUES(360, 111, 750, '1978-10-29', '1998-10-10', 2500, 1000, 2, 'LARA, DORINDA');
INSERT INTO t_empleados VALUES(370, 121, 360, '1977-06-22', '1997-01-20', 1900, NULL, 1, 'RUIZ, FABIOLA');
INSERT INTO t_empleados VALUES(380, 112, 880, '1978-03-30', '1998-01-01', 1800, NULL, 0, 'MARTIN, MICAELA');
INSERT INTO t_empleados VALUES(390, 110, 500, '1976-02-19', '1996-10-08', 2150, NULL, 1, 'MORAN, CARMEN');
INSERT INTO t_empleados VALUES(400, 111, 780, '1979-08-18', '1997-11-01', 1850, NULL, 0, 'LARA, LUCRECIA');
INSERT INTO t_empleados VALUES(410, 122, 660, '1978-07-14', '1998-10-13', 1750, NULL, 0, 'MUï¿½OZ, AZUCENA');
INSERT INTO t_empleados VALUES(420, 130, 450, '1976-10-22', '1998-11-19', 4000, NULL, 0, 'FIERRO, CLAUDIA');
INSERT INTO t_empleados VALUES(430, 122, 650, '1977-02-26', '1998-11-19', 2100, NULL, 1, 'MORA, VALERIANA');
INSERT INTO t_empleados VALUES(440, 111, 760, '1976-09-26', '1996-02-28', 2100, 1000, 0, 'DURAN, LIVIA');
INSERT INTO t_empleados VALUES(450, 112, 880, '1976-10-21', '1996-02-28', 2100, 1000, 0, 'PEREZ, SABINA');
INSERT INTO t_empleados VALUES(480, 111, 760, '1975-04-04', '1996-02-28', 2100, 1000, 1, 'PINO, DIANA');
INSERT INTO t_empleados VALUES(490, 112, 880, '1974-06-06', '1998-01-01', 1800, 1000, 0, 'TORRES, HORACIO');
INSERT INTO t_empleados VALUES(500, 111, 750, '1975-10-08', '1997-01-01', 2000, 1000, 0, 'VAZQUEZ, HONORIA');
INSERT INTO t_empleados VALUES(510, 110, 550, '1976-05-04', '1996-01-11', 2000, NULL, 1, 'CAMPOS, ROMULO');
INSERT INTO t_empleados VALUES(550, 111, 780, '1980-01-10', '1998-01-21', 1000, 1200, 0, 'SANTOS, SANCHO');

